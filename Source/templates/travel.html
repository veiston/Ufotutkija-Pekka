<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>UFOtutkiJA</title>
    <link rel="icon" href="static/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="/static/css/logo.css" />
    <link rel="stylesheet" href="/static/css/button.css" />
  </head>
  <body>
      <div class="logo">UF0tutkiJA</div>
      <div style="text-align: center; display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; flex-direction: column; height: 100%; align-items: center">
          <div>
            Temporary list of airports for testing.<br>There should be a map here
            </div>
            <div id="airportButtonsContainer" style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;">
            <!-- airport buttons -->
            </div>
      </div>

    <script>
      const airportMap = {
        1: ["KBNA"],
        2: ["KDEN", "KSEA", "KHTS"],
        3: ["KBNA"],
        default: ["KDEN", "KSEA", "KBNA", "KHTS"]
      };

      const fetchPlayer = async () => {
        try {
          const response = await fetch("/player/detail");
          return await response.json();
        } catch (error) {
          console.error(error);
          return null;
        }
      };

      const loadAirports = async () => {
        const player = await fetchPlayer();
        if (!player) return;

        const playerLevel = player.player_level;
        const allowedAirports = airportMap[playerLevel] || airportMap.default;
        const container = document.getElementById("airportButtonsContainer");

        allowedAirports.forEach(code => {
          const button = document.createElement("button");
          button.className = "button";
          button.id = code;
          button.textContent = code;
          button.addEventListener("click", () => {
            console.log(code);
          });
          container.appendChild(button);
        });
      };

      loadAirports();
    </script>
  </body>
</html>